{"version":3,"sources":["../../../../src/modules/drizzle/schemas/rooms.ts"],"sourcesContent":["import { index, pgTable, timestamp, varchar } from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { usersToRooms } from \"./usersToRooms\";\nimport { messages } from \"./messages\";\nimport { users } from \"./users\";\n\nexport const rooms = pgTable(\n  \"rooms\",\n  {\n    id: varchar(\"id\", { length: 36 }).primaryKey(),\n    name: varchar(\"name\", { length: 24 }).notNull(),\n\n    creatorId: varchar(\"creatorId\", { length: 36 })\n      .notNull()\n      .references(() => users.id, { onDelete: \"cascade\" }),\n\n    createdAt: timestamp(\"createdAt\").notNull().defaultNow(),\n    updatedAt: timestamp(\"updatedAt\").notNull().defaultNow(),\n  },\n  (table) => ({\n    nameIndex: index(\"nameIndex\").on(table.name),\n  }),\n);\n\nexport const roomsRelations = relations(rooms, ({ many }) => ({\n  messages: many(messages),\n  usersToRooms: many(usersToRooms),\n}));\n"],"names":["rooms","roomsRelations","pgTable","id","varchar","length","primaryKey","name","notNull","creatorId","references","users","onDelete","createdAt","timestamp","defaultNow","updatedAt","table","nameIndex","index","on","relations","many","messages","usersToRooms"],"mappings":";;;;;;;;;;;IAMaA,KAAK;eAALA;;IAkBAC,cAAc;eAAdA;;;wBAxBsC;4BACzB;8BACG;0BACJ;uBACH;AAEf,MAAMD,QAAQE,IAAAA,eAAO,EAC1B,SACA;IACEC,IAAIC,IAAAA,eAAO,EAAC,MAAM;QAAEC,QAAQ;IAAG,GAAGC,UAAU;IAC5CC,MAAMH,IAAAA,eAAO,EAAC,QAAQ;QAAEC,QAAQ;IAAG,GAAGG,OAAO;IAE7CC,WAAWL,IAAAA,eAAO,EAAC,aAAa;QAAEC,QAAQ;IAAG,GAC1CG,OAAO,GACPE,UAAU,CAAC,IAAMC,YAAK,CAACR,EAAE,EAAE;QAAES,UAAU;IAAU;IAEpDC,WAAWC,IAAAA,iBAAS,EAAC,aAAaN,OAAO,GAAGO,UAAU;IACtDC,WAAWF,IAAAA,iBAAS,EAAC,aAAaN,OAAO,GAAGO,UAAU;AACxD,GACA,CAACE,QAAW,CAAA;QACVC,WAAWC,IAAAA,aAAK,EAAC,aAAaC,EAAE,CAACH,MAAMV,IAAI;IAC7C,CAAA;AAGK,MAAMN,iBAAiBoB,IAAAA,qBAAS,EAACrB,OAAO,CAAC,EAAEsB,IAAI,EAAE,GAAM,CAAA;QAC5DC,UAAUD,KAAKC,kBAAQ;QACvBC,cAAcF,KAAKE,0BAAY;IACjC,CAAA"}
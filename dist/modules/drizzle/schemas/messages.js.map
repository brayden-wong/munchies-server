{"version":3,"sources":["../../../../src/modules/drizzle/schemas/messages.ts"],"sourcesContent":["import { pgTable, text, timestamp, varchar } from \"drizzle-orm/pg-core\";\nimport { users } from \"./users\";\nimport { rooms } from \"./rooms\";\nimport { relations } from \"drizzle-orm\";\n\nexport const messages = pgTable(\"messages\", {\n  id: varchar(\"id\", { length: 36 }).primaryKey(),\n  content: text(\"content\"),\n\n  authorId: varchar(\"authorId\", { length: 36 })\n    .notNull()\n    .references(() => users.id, { onDelete: \"cascade\" }),\n  roomId: varchar(\"roomId\", { length: 36 })\n    .notNull()\n    .references(() => rooms.id, { onDelete: \"cascade\" }),\n\n  createdAt: timestamp(\"createdAt\").notNull().defaultNow(),\n});\n\nexport const messagesRelations = relations(messages, ({ one }) => ({\n  room: one(rooms, {\n    fields: [messages.roomId],\n    references: [rooms.id],\n  }),\n  user: one(users, {\n    fields: [messages.authorId],\n    references: [users.id],\n  }),\n}));\n"],"names":["messages","messagesRelations","pgTable","id","varchar","length","primaryKey","content","text","authorId","notNull","references","users","onDelete","roomId","rooms","createdAt","timestamp","defaultNow","relations","one","room","fields","user"],"mappings":";;;;;;;;;;;IAKaA,QAAQ;eAARA;;IAcAC,iBAAiB;eAAjBA;;;wBAnBqC;uBAC5B;uBACA;4BACI;AAEnB,MAAMD,WAAWE,IAAAA,eAAO,EAAC,YAAY;IAC1CC,IAAIC,IAAAA,eAAO,EAAC,MAAM;QAAEC,QAAQ;IAAG,GAAGC,UAAU;IAC5CC,SAASC,IAAAA,YAAI,EAAC;IAEdC,UAAUL,IAAAA,eAAO,EAAC,YAAY;QAAEC,QAAQ;IAAG,GACxCK,OAAO,GACPC,UAAU,CAAC,IAAMC,YAAK,CAACT,EAAE,EAAE;QAAEU,UAAU;IAAU;IACpDC,QAAQV,IAAAA,eAAO,EAAC,UAAU;QAAEC,QAAQ;IAAG,GACpCK,OAAO,GACPC,UAAU,CAAC,IAAMI,YAAK,CAACZ,EAAE,EAAE;QAAEU,UAAU;IAAU;IAEpDG,WAAWC,IAAAA,iBAAS,EAAC,aAAaP,OAAO,GAAGQ,UAAU;AACxD;AAEO,MAAMjB,oBAAoBkB,IAAAA,qBAAS,EAACnB,UAAU,CAAC,EAAEoB,GAAG,EAAE,GAAM,CAAA;QACjEC,MAAMD,IAAIL,YAAK,EAAE;YACfO,QAAQ;gBAACtB,SAASc,MAAM;aAAC;YACzBH,YAAY;gBAACI,YAAK,CAACZ,EAAE;aAAC;QACxB;QACAoB,MAAMH,IAAIR,YAAK,EAAE;YACfU,QAAQ;gBAACtB,SAASS,QAAQ;aAAC;YAC3BE,YAAY;gBAACC,YAAK,CAACT,EAAE;aAAC;QACxB;IACF,CAAA"}